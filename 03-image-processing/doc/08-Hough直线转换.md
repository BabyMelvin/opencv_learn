# Hough 直线转换
## 原理
Hough是一种能够检测任何能够用几何标书的形状的流行的技术。能够检测任何形状，即使有些破坏或者扭曲。看如何直线运作的。

直线可以表示成`y=mx+c`或`ρ=xcosθ+ysinθ`,`ρ`是极轴原点到线的距离，`θ`水平轴到极线逆时针角度（方向根据你的坐标系改变而变化）。OpenCV使用下面的来表示：

<image src="image/08-01.jpg"/>

* 所以如果线通过下面，将会是正的rho角度小于180度。
*如果线在上面部分，角度小于180°，而不是大于180°，rho是负数。任何垂线是0度，水平线是90度。

Hough转换如何对直线工作的。任何直线，能用两个参数(ρ，θ）表示。所以首先建立一个2D数组或者累加器（容纳这两个参数）并初始化为0.行表示ρ，列表示θ。数组大小由你的精度决定。假如你对角度精神是1°，那么你需要180行。对于ρ，最大长度是图像的对角线(diagonal)长度。假如采用一个像素作为精度，那么行的数目可认为做对角线的长度。

假设在100x100图像中间有一条水平线。从线上取第一个点，你知道的（x,y)值。对于直线等式`ρ=xcosθ+ysinθ`,代入值`θ=0,1,2,...180`并检查你的点ρ.对每个`(ρ,θ)`,增加一个值对应累加器`(ρ,θ)`单元。所以单元(50,90)=1沿着其他的单元。

现在去直线上第二个点。和相面类似。增加单元值对应你得到的`(ρ,θ)`。这次，单元(50,90)=2.我们要做的是选择`(ρ,θ)`值。继续选择处理线上的所有点。在每个点上，单元（50,90)继续增加或选举，其他单元可能不选举出来。这个时候，单元(50,90)将会有最大值。当你选择累加最大值，你得到(50,90)的值，我们认为一条直线在图像上，到原点距离是50，角度是90°。

<image src="image/08-02.gif"/>

下面图片是累积，亮点表示直线图片的可能参数。


## 概率Hought变换
在Hough变换中，你看到直线有两个参数，将会有很多计算。概率Hough变换是对Hough变换的一种优化。并不会去多有的点，而是去足够线检测点的随机子集。必须减少阀值。看两个之间的比较。

<image src="image/08-03.png"/>
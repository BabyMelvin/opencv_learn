# MeanShift and Camshift
均值平移，自适应平移

## 目标
利用Meanshift和Camshift算法在视频中寻找和追踪物体。

## Meanshift
直观对Meanshift感觉挺简单。想象一下有许多的点（像直方图投影像素分布）。你可以给一个小的窗口(可能是一个圆)，并且必须移动窗口到像素密度最大的地方(或者点最多的地方)。如下面图片简单说明：

<image src="image/01-01.jpg"/>

* 初始化如蓝色圈C1.原始中心是蓝方块"C1_o".
* 但是如果你发现个在那窗口点集的中心，你会发现得到点"C1_r"(小蓝色圆圈)，这个点真正窗口中心。显然他们不匹配。所以需要移动窗口，比如新窗口匹配之前点集中心点。
* 然后重新获得新的点集中心。很有可能还不匹配。需要再次移动，继续迭代如还是窗口中心和点集中心重合。
* 最后你会得到带有最大像素分布的窗口。标记为绿色圈C2.正如图片那样有最多点数目。

整个处理过程在静态图中说明：

<image src="image/01-02.gif"/>

所以，我们正常传递直方图投影图片并且初始化目标位置。当物体移动，显然移动部分反应在直方图投影图片上。因此，meanshift算法移动我们窗口到最大密度的新的位置。

## camshift
意识到有些问题？ 汽车远近窗口始终是一个尺寸并且和camera很近。我们应该使得窗口尺寸和目标旋转相适应。再一次，这个方案来自OPencv实验室，称为CAMShift在1988年文章<<Computer Vision Face Tracking for Use in a Perceptual User Interface>>.

首先采用meanshift。一旦meanshift采用，随着`s=2*sqrt(M00/256)`更新窗口尺寸。同样计算椭圆最适应的区域。再次采用meanshift对新缩放搜索和之前窗口位置。这个过程一直继续指导精确被获得。

<image src="image/01-03.gif"/>
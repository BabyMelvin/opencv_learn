## SURF（Speeded up Robust features）
### 原理
上章看到SIFT关键点检测和描述。但是相对速度慢需要加速的版本。2006年，三个人Bay.H.,Tuytelaars,T. and Van Gool,L发表另一篇<<SURF:Speed Up Robust Features>>介绍一个新的算法叫SURF。是SIFT的加速版本。在SIFT中，Lowe用不同的高斯拉普拉斯找到不同缩放空间的高斯内核。SURF对LoG用Box过滤有些提升。下面图片论述的过程，用box过滤卷积在合并图片下很容易计算。并且可以用在不同的平行缩放。SURF同样依赖Hessian举证来对缩放和位置。

<image src="image/04-01.jpg"/>
在方向分配上，SURF在6s尺寸相邻尺寸中，水平和熟方向用小波响应。足够的高斯比重被采用。然后像下图给出的点一样。主要方向通过通过在60度方向窗口切片上反应的总和。有趣的是：小波响应能够在任何缩放尺寸被发现，通过积分图像。对于很多应用，旋转不变是需要的，所以不需要找到这个方向来加速处理过程。SURF提供了这个功能叫做Upright-SURF或U-SURF.提高了速度和鲁棒性±15°。Opencv都支持，通过flag，upright。如果是0，方向被计算，如果是1，方向不被计算，更快。

<image src="image/04-02.jpg"/>

对于特征描述，SURF在水平熟知方向使用小波响应(同样，使用图片积分能够使操作简单)。在关键点周围取相邻尺寸大小20sx20s。分成4x4子区域。对于每个字区域，水平和数值方向小波响应被获得，并且向量格式是:<image src="image/04-03.png"/>.
这个作为一个带有总共64尺寸的SURF特征描述的向量。减小尺寸，将会加快计算速度和匹配度，但是提供好的特征的特殊性。

给了获得更好的辨识度，SURF特征描述有一个扩大的128尺寸的版本。dx和|dx|在dy<0和dy>=0分开计算。对dx的符号不同，要分开计算dy和|dy|因此特征数量将会翻倍。他不会增减计算的复杂度。OpenCV都提供，通过设置flag extended，0,1对应64或者128.默认是128尺寸。

另一个重要的提高是使用拉普拉斯符号的使用(Hessian举证的trace值)，为了感兴趣的点。这不会增加计算代价，因为在探测阶段已经完成。拉普拉斯符号用来将在黑背景的白点和相反做区别。在匹配阶段，如果他们相同类型对比(下面的图片)我们只比较特征。在不减少描述的性能，最小的信息允许快速的匹配。

<image src="image/04-04.png"/>

简单来说，SURF在每一步增加许多特征增加计算速度。和SIFT性能相比，分析表明比SIFT速度快3倍。SURF在处理模糊和旋转处理很好，但是处理视角变化和光照变化不好。
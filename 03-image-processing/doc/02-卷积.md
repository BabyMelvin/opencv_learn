滤波器可以说是信号处理中最重要的研究对象，滤波器可以将原始信号的有用信息通过各种组合来凸显出来，因此很多时候也将它们称为Neighborhood operators，基本上所有涉及到特征的应用场合都要考虑滤波器，即使是发展到看起来很高大上的深度学习等，各种滤波器如果设计的好的话，能够极大地提高整个算法的准确度和效率。

## 1.线性运算
在图像处理中，对邻域中的像素的计算为线性运算时，如利用窗口函数进行平滑加权求和的运算，或者某种卷积运算，都可以称为线性滤波。常见的线性滤波有：均值滤波、高斯滤波、盒子滤波、拉普拉斯滤波等等，通常线性滤波器之间只是模版系数不同。

线性运算是加法和数量乘法， 在实数领域像只包含加法和数量乘法二元一次方程就属于线性运算，如y=3x+5。如果是矩阵的加法和数乘运算，就称为矩阵的线性运算；如果是向量的加法和数乘运算，统称为向量的线性运算。对于不同线性运算一般有不同的形式，它们满足交换律、结合律、分配律等。

### 1.1 这里我们重点讲矩阵的线性运算（其实图像就是个矩阵）

矩阵的加法和数乘运算，统称为矩阵的线性运算。
矩阵加减法，定义 设

<image src="image/02-01.jpg"/>

两个mxn型矩阵，则矩阵为：

<image src="image/02-02.jpg"/>

则C=A+B。注意：像素RGB范围0-255，一般都会使用`saturate_cast`函数(value)确保值大小在0-255之间。


## 2.卷积

卷积运算是指从图像的左上角开始，开一个与模板同样大小的活动窗口，窗口图像与模板像元对应起来相乘再相加，并用计算结果代替窗口中心的像元亮度值。然后，活动窗口向右移动一列，并作同样的运算。以此类推，从左到右、从上到下，即可得到一幅新图像。

以离散信号为例，连续信号同理。已知`x[0] = a, x[1] = b, x[2]=c`.

<image src="image/02-03.jpg"/>

已知`y[0] = i, y[1] = j, y[2]=k`.

<image src="image/02-04.jpg"/>
下面通过演示求`x[n] * y[n]`的过程，揭示卷积的物理意义。

* 第一步，`x[n]`乘以`y[0]`并平移到位置0：

<image src="image/02-05.jpg"/>


* 第二步，`x[n]`乘以`y[1]`并平移到位置1 .

<image src="image/02-06.png"/>

* 第三步，`x[n]`乘以`y[2]`并平移到位置2：

<image src="image/02-07.png"/>

最后，把上面三个图叠加，就得到了`x[n] * y[n]`： 

<image src="image/02-08.png"/>

无非是平移（没有反褶！）、叠加。 
从这里，可以看到卷积的重要的物理意义是：一个函数（如：单位响应）在另一个函数（如：输入信号）上的加权叠加。

重复一遍，这就是卷积的意义：**加权叠加**。
对于线性时不变系统，如果知道该系统的单位响应，那么将单位响应和输入信号求卷积，就相当于把输入信号的各个时间点的单位响应 加权叠加，就直接得到了输出信号。

<image src="image/02-09.png"/>

## 2.1卷积的应用
用一个模板和一幅图像进行卷积，对于图像上的一个点，让模板的原点和该点重合，然后模板上的点和图像上对应的点相乘，然后各点的积相加，就得到了该点的卷积值。

对图像上的每个点都这样处理。由于大多数模板都是对称的，所以模板不旋转。卷积是一种积分运算，用来求两个曲线重叠区域面积。可以看作加权求和，可以用来消除噪声、特征增强。 
把一个点的像素值用它周围的点的像素值的加权平均代替。 
卷积是一种线性运算,图像处理中常见的mask运算都是卷积，广泛应用于`图像滤波`。
 
卷积关系最重要的一种情况，就是在信号与线性系统或数字信号处理中的卷积定理。利用该定理，`可以将时间域或空间域中的卷积运算等价为频率域的相乘运算`，从而利用`FFT`等快速算法，实现有效的计算，节省运算代价。

